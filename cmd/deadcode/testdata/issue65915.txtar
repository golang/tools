# Regression test for issue 65915: the enumeration of source-level
# functions used the flawed ssautil.AllFunctions, causing it to
# miss some unexported ones.

 deadcode -filter= example.com

 want "unreachable func: example.UnUsed"
 want "unreachable func: example.unUsed"
 want "unreachable func: PublicExample.UnUsed"
 want "unreachable func: PublicExample.unUsed"

-- go.mod --
module example.com
go 1.18

-- main.go --
package main
import "fmt"

type example struct{}

func (e example) UnUsed() {fmt.Println("a")}

func (e example) Used() {fmt.Println("a")}

func (e example) unUsed() {fmt.Println("a")}

func (e example) used() {fmt.Println("a")}

type PublicExample struct{}

func (p PublicExample) UnUsed() {fmt.Println("a")}

func (p PublicExample) Used() {fmt.Println("a")}

func (p PublicExample) unUsed() {fmt.Println("a")}

func (p PublicExample) used() {fmt.Println("a")}

func main() {
	example{}.Used()
	example{}.used()
	PublicExample{}.Used()
	PublicExample{}.used()
}
